<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญุงุณุจุฉ ุงูุฑุงุชุจ ูุงูุงุณุชูุทุงุน - Cashophy</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <h1>๐ฐ Cashophy</h1>
            </div>
            <ul class="navbar-menu">
                <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="calculator.html">ุญุงุณุจุฉ ุงููุฑูุถ</a></li>
                <li><a href="salary-calculator.html">ุญุงุณุจุฉ ุงูุฑุงุชุจ</a></li>
                <li><a href="analysis.html">ุงูุชุญููู ุงููุงูู</a></li>
                <li><a href="about.html">ูู ูุญู</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>๐ธ ุญุงุณุจุฉ ุงูุฑุงุชุจ ูุงูุงุณุชูุทุงุน</h1>
        <p>ุงุนุฑู ูู ุฑุงุญ ูุทูุน ูู ุฑุงุชุจู ููู ุงููุณุจุฉ ุขููุฉ ููุง ุฎุทุฑ</p>

        <div class="card">
            <h2 class="card-title">ุฃุฏุฎู ุจูุงูุงุชู ุงููุงููุฉ</h2>
            
            <div class="form-group">
                <label class="form-label">ุฑุงุชุจู ุงูุดูุฑู (ุฑูุงู)</label>
                <input type="number" id="salary" class="form-input" placeholder="ูุซุงู: 15000" value="15000">
            </div>

            <div class="form-group">
                <label class="form-label">ุงูุชุฒุงูุงุชู ุงูุญุงููุฉ (ุฃูุณุงุท ุฃุฎุฑู)</label>
                <input type="number" id="other-debts" class="form-input" placeholder="ูุซุงู: 2000" value="0">
            </div>

            <div class="form-group">
                <label class="form-label">ูุณุท ุงููุฑุถ ุงูุฌุฏูุฏ</label>
                <input type="number" id="new-payment" class="form-input" placeholder="ูุซุงู: 3000" value="3000">
            </div>

            <button onclick="calculateSalary()" class="btn btn-primary btn-block">ุงุญุณุจ ุงูุขู ๐</button>
        </div>

        <div id="salary-results" style="display: none; margin-top: 2rem;">
            <h2>๐ ุงููุชุงุฆุฌ</h2>
            
            <div class="grid grid-2">
                <div class="result-item">
                    <div class="result-label">ุตุงูู ุงูุฑุงุชุจ ุจุนุฏ ุงูุฃูุณุงุท</div>
                    <div class="result-value" id="net-salary">0 ุฑูุงู</div>
                    <div class="result-description">ุงููุจูุบ ุงููู ุฑุงุญ ูุจูู ูุนู ุจุนุฏ ุฏูุน ุฌููุน ุงูุฃูุณุงุท</div>
                </div>

                <div class="result-item">
                    <div class="result-label">ูุณุจุฉ ุงูุงุณุชูุทุงุน ูู ุงูุฑุงุชุจ</div>
                    <div class="result-value" id="debt-ratio">0%</div>
                    <span id="ratio-badge" class="result-percentage">-</span>
                    <div class="result-description" id="ratio-message">-</div>
                </div>

                <div class="result-item">
                    <div class="result-label">ูุณุจุฉ ุงููุณุท ุงูุฌุฏูุฏ</div>
                    <div class="result-value" id="new-payment-ratio">0%</div>
                    <div class="result-description">ุงููุณุจุฉ ูู ุฑุงุชุจู ุงููู ุฑุงุญ ุชุฑูุญ ูููุณุท ุงูุฌุฏูุฏ</div>
                </div>

                <div class="result-item">
                    <div class="result-label">ุงูุชุฒุงูุงุชู ุงูุญุงููุฉ</div>
                    <div class="result-value" id="current-debts-ratio">0%</div>
                    <div class="result-description">ุงููุณุจุฉ ูู ุฑุงุชุจู ุงููู ุชุฑูุญ ููุฃูุณุงุท ุงููุฏููุฉ</div>
                </div>
            </div>

            <div id="salary-alert"></div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-bottom">
                <p>ยฉ 2024 Cashophy - ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
            </div>
        </div>
    </footer>

    <script src="js/calculator.js"></script>
    <script src="js/main.js"></script>
    <script>
        function calculateSalary() {
            const salary = parseFloat(document.getElementById('salary').value);
            const otherDebts = parseFloat(document.getElementById('other-debts').value) || 0;
            const newPayment = parseFloat(document.getElementById('new-payment').value);

            if (!salary || !newPayment) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุฑุงุชุจ ูุงููุณุท ุงูุฌุฏูุฏ');
                return;
            }

            const result = LoanCalculator.calculateDebtRatio(salary, newPayment, otherDebts);
            const newPaymentRatio = (newPayment / salary) * 100;
            const currentDebtsRatio = (otherDebts / salary) * 100;

            document.getElementById('net-salary').textContent = formatCurrency(result.netSalary);
            document.getElementById('debt-ratio').textContent = formatPercentage(result.ratio);
            document.getElementById('new-payment-ratio').textContent = formatPercentage(newPaymentRatio);
            document.getElementById('current-debts-ratio').textContent = formatPercentage(currentDebtsRatio);
            document.getElementById('ratio-message').textContent = result.message;

            // ุชุญุฏูุซ ุงูุดุงุฑุฉ
            const badge = document.getElementById('ratio-badge');
            badge.className = 'result-percentage';
            if (result.status === 'safe') {
                badge.textContent = 'โ ุขูู';
                badge.style.background = '#22c55e';
            } else if (result.status === 'moderate') {
                badge.textContent = 'โ ูุชูุณุท';
                badge.style.background = '#f59e0b';
            } else {
                badge.textContent = 'โ ุฎุทุฑ';
                badge.style.background = '#ef4444';
            }

            // ุนุฑุถ ุงูุชุญุฐูุฑ
            const alertDiv = document.getElementById('salary-alert');
            if (result.ratio >= 50) {
                alertDiv.innerHTML = '<div class="alert alert-danger">๐จ ุฎุทุฑ ุฌุฏุงู! ูุณุจุฉ ุงูุงุณุชูุทุงุน ูุฑุชูุนุฉ ุจุดูู ูุจูุฑ - ุบูุฑ ูุณุชุญุณู ุฃุจุฏุงู</div>';
            } else if (result.ratio >= 33) {
                alertDiv.innerHTML = '<div class="alert alert-warning">โ๏ธ ุชุญุฐูุฑ! ูุณุจุฉ ุงูุงุณุชูุทุงุน ุชุฌุงูุฒุช ุงูุญุฏ ุงูุขูู (33%)</div>';
            } else if (result.ratio >= 25) {
                alertDiv.innerHTML = '<div class="alert alert-warning">โ๏ธ ุงูุชุจู! ูุณุจุฉ ุงูุงุณุชูุทุงุน ูุฑูุจุฉ ูู ุงูุญุฏ ุงูุฃุนูู</div>';
            } else {
                alertDiv.innerHTML = '<div class="alert alert-success">โ ููุชุงุฒ! ูุณุจุฉ ุงูุงุณุชูุทุงุน ุถูู ุงูุญุฏูุฏ ุงูุขููุฉ</div>';
            }

            document.getElementById('salary-results').style.display = 'block';
            document.getElementById('salary-results').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
