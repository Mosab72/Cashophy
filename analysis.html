<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุชุญููู ุงููุงูู ุงูุดุงูู - Cashophy</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <h1>๐ฐ Cashophy</h1>
            </div>
            <ul class="navbar-menu">
                <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="calculator.html">ุญุงุณุจุฉ ุงููุฑูุถ</a></li>
                <li><a href="salary-calculator.html">ุญุงุณุจุฉ ุงูุฑุงุชุจ</a></li>
                <li><a href="analysis.html">ุงูุชุญููู ุงููุงูู</a></li>
                <li><a href="about.html">ูู ูุญู</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>๐ฏ ุงูุชุญููู ุงููุงูู ุงูุดุงูู</h1>
        <p>ุงุญุตู ุนูู ุชูููู ุดุงูู ููุถุนู ุงููุงูู ูุน ูุคุดุฑ ุงูุฎุทุฑ ููุตุงุฆุญ ูุฎุตุตุฉ</p>

        <div class="card">
            <h2 class="card-title">ุฃุฏุฎู ุจูุงูุงุชู ุงููุงููุฉ</h2>
            
            <div class="grid grid-2">
                <div class="form-group">
                    <label class="form-label">ุฑุงุชุจู ุงูุดูุฑู (ุฑูุงู)</label>
                    <input type="number" id="analysis-salary" class="form-input" value="15000">
                </div>
                <div class="form-group">
                    <label class="form-label">ูุจูุบ ุงููุฑุถ (ุฑูุงู)</label>
                    <input type="number" id="analysis-amount" class="form-input" value="100000">
                </div>
                <div class="form-group">
                    <label class="form-label">ูุณุจุฉ ุงููุงุฆุฏุฉ ุงูุณูููุฉ (%)</label>
                    <input type="number" id="analysis-rate" class="form-input" value="4.5" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">ูุฏุฉ ุงููุฑุถ (ุณููุงุช)</label>
                    <input type="number" id="analysis-years" class="form-input" value="5">
                </div>
                <div class="form-group">
                    <label class="form-label">ุงูุชุฒุงูุงุช ุฃุฎุฑู (ุฑูุงู)</label>
                    <input type="number" id="analysis-debts" class="form-input" value="0">
                </div>
            </div>

            <button onclick="performAnalysis()" class="btn btn-primary btn-block">ุงุจุฏุฃ ุงูุชุญููู ๐</button>
        </div>

        <div id="analysis-results" style="display: none; margin-top: 2rem;">
            <h2>๐ ูุชุงุฆุฌ ุงูุชุญููู</h2>
            
            <div class="card" style="text-align: center; padding: 3rem;">
                <h3>ูุคุดุฑ ุงูุฎุทุฑ ุงููุงูู</h3>
                <div style="font-size: 4rem; font-weight: 700; color: var(--primary-color); margin: 1rem 0;" id="risk-score">-</div>
                <div style="font-size: 1.25rem; font-weight: 600;" id="risk-status">-</div>
            </div>

            <div class="grid grid-3">
                <div class="result-item">
                    <div class="result-label">ูุณุจุฉ ุงูุงุณุชูุทุงุน ุงููููุฉ</div>
                    <div class="result-value" id="total-ratio">0%</div>
                    <span id="ratio-status" class="result-percentage">-</span>
                </div>

                <div class="result-item">
                    <div class="result-label">ูุณุจุฉ ุงููุงุฆุฏุฉ ูู ุงููุฑุถ</div>
                    <div class="result-value" id="interest-pct">0%</div>
                </div>

                <div class="result-item">
                    <div class="result-label">ูุณุจุฉ ุงููุฑุถ ููุฑุงุชุจ ุงูุณููู</div>
                    <div class="result-value" id="loan-to-salary">0%</div>
                </div>
            </div>

            <div class="card">
                <h3>๐ก ุงูุชูุตูุงุช ูุงููุตุงุฆุญ</h3>
                <div id="recommendations"></div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-bottom">
                <p>ยฉ 2024 Cashophy - ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
            </div>
        </div>
    </footer>

    <script src="js/calculator.js"></script>
    <script src="js/main.js"></script>
    <script>
        function performAnalysis() {
            const salary = parseFloat(document.getElementById('analysis-salary').value);
            const amount = parseFloat(document.getElementById('analysis-amount').value);
            const rate = parseFloat(document.getElementById('analysis-rate').value);
            const years = parseFloat(document.getElementById('analysis-years').value);
            const debts = parseFloat(document.getElementById('analysis-debts').value) || 0;

            if (!salary || !amount || !rate || !years) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌููุน ุงูุจูุงูุงุช');
                return;
            }

            const loanDetails = LoanCalculator.calculateLoanDetails(amount, rate, years, 'fixed');
            const debtRatio = LoanCalculator.calculateDebtRatio(salary, loanDetails.monthlyPayment, debts);
            const loanToSalary = (amount / (salary * 12)) * 100;
            
            const riskScore = LoanCalculator.calculateRiskScore(
                debtRatio.ratio,
                rate,
                loanToSalary
            );

            // ุนุฑุถ ุงููุชุงุฆุฌ
            document.getElementById('risk-score').textContent = riskScore + '/100';
            document.getElementById('total-ratio').textContent = formatPercentage(debtRatio.ratio);
            document.getElementById('interest-pct').textContent = formatPercentage(loanDetails.interestRate);
            document.getElementById('loan-to-salary').textContent = formatPercentage(loanToSalary);

            // ุชุญุฏูุฏ ุญุงูุฉ ุงููุฎุงุทุฑุฉ
            const scoreDiv = document.getElementById('risk-score');
            const statusDiv = document.getElementById('risk-status');
            const ratioStatus = document.getElementById('ratio-status');

            if (riskScore >= 80) {
                scoreDiv.style.color = '#22c55e';
                statusDiv.textContent = 'โ ูุถุน ูุงูู ููุชุงุฒ';
                statusDiv.style.color = '#22c55e';
                ratioStatus.textContent = 'โ ุขูู';
                ratioStatus.style.background = '#22c55e';
            } else if (riskScore >= 60) {
                scoreDiv.style.color = '#f59e0b';
                statusDiv.textContent = 'โ ูุถุน ูุงูู ูุชูุณุท';
                statusDiv.style.color = '#f59e0b';
                ratioStatus.textContent = 'โ ูุชูุณุท';
                ratioStatus.style.background = '#f59e0b';
            } else {
                scoreDiv.style.color = '#ef4444';
                statusDiv.textContent = 'โ ูุถุน ูุงูู ูุญุชุงุฌ ุชุญุณูู';
                statusDiv.style.color = '#ef4444';
                ratioStatus.textContent = 'โ ุฎุทุฑ';
                ratioStatus.style.background = '#ef4444';
            }

            // ุงูุชูุตูุงุช
            let recommendations = '<ul style="line-height: 2;">';
            
            if (debtRatio.ratio > 33) {
                recommendations += '<li>โ๏ธ ูุณุจุฉ ุงูุงุณุชูุทุงุน ุนุงููุฉ - ุญุงูู ุชูููู ุงููุจูุบ ุฃู ุฒูุงุฏุฉ ุงููุฏุฉ</li>';
            }
            
            if (loanDetails.interestRate > 25) {
                recommendations += '<li>๐ก ุงููุงุฆุฏุฉ ุนุงููุฉ - ูุงุฑู ูุน ุนุฑูุถ ุฃุฎุฑู ูุฏ ุชููู ุฃูุถู</li>';
            }
            
            if (loanToSalary > 500) {
                recommendations += '<li>โ๏ธ ุงููุฑุถ ูุจูุฑ ูุณุจุฉ ูุฑุงุชุจู - ุฑุงุฌุน ุงุญุชูุงุฌู ุงููุนูู</li>';
            }
            
            if (riskScore >= 80) {
                recommendations += '<li>โ ูุถุนู ุงููุงูู ููุชุงุฒ - ุงููุฑุถ ุถูู ูุฏุฑุชู ุงููุงููุฉ</li>';
            }
            
            recommendations += '<li>๐ฐ ููุฑ ูู ุงูุณุฏุงุฏ ุงููุจูุฑ ูุชูููุฑ ุงูููุงุฆุฏ</li>';
            recommendations += '<li>๐ ุงุญุชูุธ ุจูุจูุบ ุทูุงุฑุฆ ูุนุงุฏู 3-6 ุฃุดูุฑ ูู ุฑุงุชุจู</li>';
            recommendations += '</ul>';

            document.getElementById('recommendations').innerHTML = recommendations;

            document.getElementById('analysis-results').style.display = 'block';
            document.getElementById('analysis-results').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
